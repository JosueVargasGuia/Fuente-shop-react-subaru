<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="rptCotizacionRepuesto" pageWidth="595" pageHeight="842" columnWidth="565" leftMargin="15" rightMargin="15" topMargin="0" bottomMargin="0" uuid="f2ad2ea9-9c9f-400e-b3c1-3d2ea433d1e3">
	<property name="ireport.scriptlethandling" value="0"/>
	<property name="ireport.encoding" value="UTF-8"/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="cnxOracle"/>
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<import value="net.sf.jasperreports.engine.*"/>
	<import value="java.util.*"/>
	<import value="net.sf.jasperreports.engine.data.*"/>
	<parameter name="codCotizacion" class="java.lang.String"/>
	<queryString language="SQL">
		<![CDATA[SELECT CODPRO, NOMBRE, UBI, PRECIO, CANTIDAD, IMPORTE, DSCTO, VALOR_VENTA, PRECIO_VENTA FROM
(
    SELECT TRIM(P.CHRCODIGOPRODUCTO) CODPRO, P.VCHDESCRIPCION NOMBRE, U.VCHDESCRIPCION UBI, ROUND(CD.NUMPRECIO,2) PRECIO, ROUND(CD.NUMCANTIDAD,2) CANTIDAD,
           ROUND((CD.NUMPRECIO *  CD.NUMCANTIDAD),2) IMPORTE, ROUND(CD.NUMDCTO,2) DSCTO,
           ROUND(NVL(CD.NUMSUBTOTAL,0),2) VALOR_VENTA, ROUND(NVL(CD.NUMSUBTOTAL,0),2) + ( ROUND(NVL(CD.NUMSUBTOTAL,0),2) * PKG_CALCULOS.GET_IGV+ NVL(CD.NUMICB,0)) PRECIO_VENTA
    FROM COTIZACIONDETALLE CD
    LEFT JOIN COTIZACION C ON CD.NUMCODIGOCOTIZACION = C.NUMCODIGOCOTIZACION
    INNER JOIN PRODUCTO P ON CD.CHRCODIGOPRODUCTO = P.CHRCODIGOPRODUCTO
    LEFT  JOIN ALMACENPRODUCTO AP1 ON AP1.CHRCODIGOPRODUCTO = P.CHRCODIGOPRODUCTO
    LEFT  JOIN UBICACION U ON AP1.CHRCODIGOUBICACION = U.CHRCODIGOUBICACION
    WHERE TO_CHAR(CD.NUMCODIGOCOTIZACION) = $P{codCotizacion} AND
          AP1.NUMCODIGOALMACENPRODUCTO IN
          ( SELECT MAX(NUMCODIGOALMACENPRODUCTO) FROM ALMACENPRODUCTO AP2
            WHERE AP2.CHRCODIGOPRODUCTO = AP1.CHRCODIGOPRODUCTO AND AP2.NUMCODIGOSUCURSAL = C.NUMCODIGOSUCURSAL AND
                  TRIM(CHRCODIGOPRODUCTO) = TRIM(P.CHRCODIGOPRODUCTO)
          )
    -- ORDER BY P.CHRCODIGOPRODUCTO
UNION

    SELECT '999999999' CODPRO, 'Servicio de Flete y Envio' NOMBRE, NULL UBI, NUMCOSTOENVIO PRECIO,1 CANTIDAD, NUMCOSTOENVIO IMPORTE,
                  NULL DSCTO, NUMCOSTOENVIO VALOR_VENTA, ROUND(NUMCOSTOENVIO,2) + ROUND( ROUND(NUMCOSTOENVIO,2) * PKG_CALCULOS.GET_IGV, 2) PRECIO_VENTA
    FROM COTIZACION
    WHERE NUMCODIGOCOTIZACION = $P{codCotizacion} AND NUMCOSTOENVIO > 0
)
ORDER BY CODPRO ASC]]>
	</queryString>
	<field name="CODPRO" class="java.lang.String"/>
	<field name="NOMBRE" class="java.lang.String"/>
	<field name="UBI" class="java.lang.String"/>
	<field name="PRECIO" class="java.math.BigDecimal"/>
	<field name="CANTIDAD" class="java.math.BigDecimal"/>
	<field name="IMPORTE" class="java.math.BigDecimal"/>
	<field name="DSCTO" class="java.math.BigDecimal"/>
	<field name="VALOR_VENTA" class="java.math.BigDecimal"/>
	<field name="PRECIO_VENTA" class="java.math.BigDecimal"/>
	<variable name="PORC" class="java.lang.Double">
		<variableExpression><![CDATA[new java.lang.Double( (($F{DSCTO}.doubleValue()) * 100) / ($F{IMPORTE}.doubleValue())  )]]></variableExpression>
	</variable>
	<variable name="total" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{PRECIO_VENTA}]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band splitType="Stretch"/>
	</title>
	<pageHeader>
		<band height="1" splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="23" splitType="Stretch">
			<rectangle>
				<reportElement key="rectangle-1" x="-2" y="7" width="565" height="15" uuid="16a976ed-17b4-43cd-9294-7b2dd2d5276f"/>
			</rectangle>
			<staticText>
				<reportElement key="staticText-1" x="2" y="8" width="74" height="11" uuid="c6ac50c5-b134-4086-80fc-8581616b5ced"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Bottom">
					<font fontName="SansSerif" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Codigo]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-2" x="81" y="7" width="168" height="11" uuid="43bffeae-a8f7-4a12-8b03-7db45116e846"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Bottom">
					<font fontName="SansSerif" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Descripcion]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-3" x="304" y="8" width="41" height="11" uuid="895b4a98-4256-4654-863d-3fb9e4f76d5f"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Bottom">
					<font fontName="SansSerif" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Valor]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-4" x="340" y="8" width="35" height="11" uuid="e7e92bd6-d6b9-45b7-847a-c226622e977b"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Bottom">
					<font fontName="SansSerif" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Cant]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-5" x="378" y="5" width="37" height="14" uuid="d611998a-f3a6-4558-9908-c5bb56642e67"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Bottom">
					<font fontName="SansSerif" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Total]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-6" x="414" y="5" width="65" height="14" uuid="16771793-dc13-4322-b5f7-f536728c64e1"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Bottom">
					<font fontName="SansSerif" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Dscto]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-7" x="455" y="5" width="60" height="14" uuid="254d841c-71fd-4769-bc35-6dd121b0c3ff"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Bottom">
					<font fontName="SansSerif" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Valor Venta]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-8" x="493" y="5" width="62" height="14" uuid="17904ea9-4028-45c7-b9ff-51aec0ac49f3"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Bottom">
					<font fontName="SansSerif" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[P. Venta]]></text>
			</staticText>
			<line>
				<reportElement key="line-1" x="449" y="7" width="1" height="14" uuid="5d126dff-e04e-4168-adb8-9009243dd464"/>
			</line>
			<line>
				<reportElement key="line-2" x="247" y="7" width="1" height="14" uuid="99d6808e-2732-422e-9e99-914f3229be37"/>
			</line>
			<line>
				<reportElement key="line-3" x="404" y="7" width="1" height="14" uuid="7e1ca996-b77a-47b1-b017-418ae1d5606f"/>
			</line>
			<staticText>
				<reportElement key="staticText-11" x="251" y="8" width="60" height="11" uuid="a6c6cfe1-f412-4121-96b1-189c55c492bc"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Bottom">
					<font fontName="SansSerif" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Ubicacion]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="12" splitType="Stretch">
			<textField isBlankWhenNull="false">
				<reportElement key="textField" x="0" y="1" width="90" height="11" uuid="5ea88972-a094-4af1-8e13-15b305812853"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{CODPRO}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement key="textField" x="82" y="1" width="168" height="11" uuid="bbcf4ffb-b957-4d13-aaf9-0087f7c97794"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{NOMBRE}]]></textFieldExpression>
			</textField>
			<textField pattern="##0.00" isBlankWhenNull="false">
				<reportElement key="textField" x="275" y="1" width="50" height="11" uuid="54e2e633-b7ce-43b5-a7c2-7bc5a400fdaa"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{PRECIO}]]></textFieldExpression>
			</textField>
			<textField pattern="##0.00" isBlankWhenNull="false">
				<reportElement key="textField" x="297" y="1" width="64" height="11" uuid="6eef7dea-4552-4f1b-a62d-06275c42cc29"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{CANTIDAD}]]></textFieldExpression>
			</textField>
			<textField pattern="##0.00" isBlankWhenNull="false">
				<reportElement key="textField" x="345" y="1" width="56" height="11" uuid="dbb9c850-9658-44f8-8f2b-b9baafe7975e"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{IMPORTE}]]></textFieldExpression>
			</textField>
			<textField pattern="##0.00" isBlankWhenNull="true">
				<reportElement key="textField" x="395" y="1" width="46" height="11" uuid="af02eda5-2376-4376-a8d6-8c083684cea0"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{DSCTO}]]></textFieldExpression>
			</textField>
			<textField pattern="##0.00" isBlankWhenNull="false">
				<reportElement key="textField" x="432" y="1" width="73" height="11" uuid="9999a0d8-1951-4d40-8730-b906fd306271"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{VALOR_VENTA}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement key="textField" x="477" y="0" width="80" height="11" uuid="fff0800b-cde4-4206-a579-bed54b6fc226"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{PRECIO_VENTA}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement key="textField" x="251" y="1" width="65" height="11" uuid="9e15d0af-501d-423f-a24e-334cddbf2353"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{UBI}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="10" splitType="Stretch"/>
	</pageFooter>
	<lastPageFooter>
		<band height="12" splitType="Stretch">
			<staticText>
				<reportElement key="staticText-10" x="411" y="0" width="108" height="12" uuid="8359dd55-6d3d-4f16-8708-c2570942f982"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="SansSerif" size="9" isBold="true" isItalic="false" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[Precio Total US$]]></text>
			</staticText>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement key="textField" x="470" y="0" width="85" height="12" uuid="d5f936c5-2f5b-4f0a-9d28-fd416cf65623"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="8" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{total}]]></textFieldExpression>
			</textField>
		</band>
	</lastPageFooter>
	<summary>
		<band splitType="Stretch"/>
	</summary>
</jasperReport>
